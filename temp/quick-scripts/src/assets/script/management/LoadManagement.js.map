{"version":3,"sources":["assets/script/management/LoadManagement.ts"],"names":[],"mappings":";;;;;AAAA;;;;GAIG;;;;;;;;AAEG,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAA;QAGY,YAAO,GAAqB,IAAI,GAAG,EAAE,CAAC;IAqDlD,CAAC;uBAxDoB,cAAc;IAK/B,sBAAkB,yBAAO;aAAzB;YACI,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;gBAChB,IAAI,CAAC,QAAQ,GAAG,IAAI,gBAAc,EAAE,CAAC;aACxC;YACD,OAAO,IAAI,CAAC,QAAQ,CAAC;QACzB,CAAC;;;OAAA;IAED;;;;;OAKG;IACI,mCAAU,GAAjB,UAAkB,GAAW,EAAE,OAAe;QAA9C,iBAYC;QAVG,OAAO,IAAI,OAAO,CAAO,UAAC,GAAG;YACzB,EAAE,CAAC,YAAY,CAAC,UAAU,CAAC,GAAG,EAAE,UAAC,GAAG,EAAE,MAA8B;gBAChE,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,UAAC,GAAG,EAAE,OAAO;oBAC9B,IAAI,OAAO,YAAY,EAAE,CAAC,MAAM,EAAE;wBAC9B,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;wBACxC,GAAG,EAAE,CAAC;qBACT;gBACL,CAAC,CAAC,CAAC;YACP,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACP,CAAC;IAED;;;;OAIG;IACI,oCAAW,GAAlB,UAAmB,GAAW,EAAE,QAAgB;QAAhD,iBAWC;QAVG,OAAO,IAAI,OAAO,CAAO,UAAC,GAAG;YACzB,EAAE,CAAC,YAAY,CAAC,UAAU,CAAC,GAAG,EAAE,UAAC,GAAG,EAAE,MAA8B;gBAChE,MAAM,CAAC,OAAO,CAAC,QAAQ,EAAE,UAAC,GAAG,EAAE,OAAO;oBAClC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;wBACrC,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;qBACjD;oBACD,GAAG,EAAE,CAAA;gBACT,CAAC,CAAC,CAAC;YACP,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACP,CAAC;IACD;;;OAGG;IACI,oCAAW,GAAlB;QACI,OAAO,IAAI,CAAC,OAAO,CAAC;IACxB,CAAC;;IAvDgB,cAAc;QADlC,OAAO;OACa,cAAc,CAwDlC;IAAD,qBAAC;CAxDD,AAwDC,IAAA;kBAxDoB,cAAc","file":"","sourceRoot":"/","sourcesContent":["/*\n * Author: ahhh (new_q8@163.com)\n *\n * Description: 加载管理器\n */\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class LoadManagement {\n\n    private static _install: LoadManagement;\n    private loadArr: Map<string, any> = new Map();\n\n    public static get install() {\n        if (!this._install) {\n            this._install = new LoadManagement();\n        }\n        return this._install;\n    }\n\n    /**\n     * 加载预制体\n     * @param url \n     * @param asserts \n     * @returns \n     */\n    public loadPrefab(url: string, asserts: string) {\n\n        return new Promise<void>((res) => {\n            cc.assetManager.loadBundle(url, (ell, bundle: cc.AssetManager.Bundle) => {\n                bundle.load(asserts, (ell, asserts) => {\n                    if (asserts instanceof cc.Prefab) {\n                        this.loadArr.set(asserts.name, asserts);\n                        res();\n                    }\n                });\n            });\n        });\n    }\n\n    /**\n     * 加载预制体文件夹\n     * @param url \n     * @param asserts \n     */\n    public loadPrefabs(url: string, fileName: string) {\n        return new Promise<void>((res) => {\n            cc.assetManager.loadBundle(url, (ell, bundle: cc.AssetManager.Bundle) => {\n                bundle.loadDir(fileName, (ell, asserts) => {\n                    for (let i = 0; i < asserts.length; i++) {\n                        this.loadArr.set(asserts[i].name, asserts[i]);\n                    }\n                    res()\n                });\n            });\n        });\n    }\n    /**\n     * 获得加载列表\n     * @returns \n     */\n    public getLoadList() {\n        return this.loadArr;\n    }\n}\n"]}